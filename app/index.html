<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, user-scalable=no">
  <title>Yith Library Mobile App</title>

  <!-- Building blocks -->
  <link rel="stylesheet" href="/styles/Building-Blocks-1.3.1/style/action_menu.css" type="text/css">
  <link rel="stylesheet" href="/styles/Building-Blocks-1.3.1/style/buttons.css" type="text/css">
  <link rel="stylesheet" href="/styles/Building-Blocks-1.3.1/style/confirm.css" type="text/css">
  <link rel="stylesheet" href="/styles/Building-Blocks-1.3.1/style/edit_mode.css" type="text/css">
  <link rel="stylesheet" href="/styles/Building-Blocks-1.3.1/style/headers.css" type="text/css">
  <link rel="stylesheet" href="/styles/Building-Blocks-1.3.1/style/input_areas.css" type="text/css">
  <link rel="stylesheet" href="/styles/Building-Blocks-1.3.1/style/status.css" type="text/css">
  <link rel="stylesheet" href="/styles/Building-Blocks-1.3.1/style/switches.css" type="text/css">
  <link rel="stylesheet" href="/styles/Building-Blocks-1.3.1/style_unstable/drawer.css" type="text/css">
  <link rel="stylesheet" href="/styles/Building-Blocks-1.3.1/style_unstable/lists.css" type="text/css">
  <link rel="stylesheet" href="/styles/Building-Blocks-1.3.1/style_unstable/progress_activity.css" type="text/css">
  <link rel="stylesheet" href="/styles/Building-Blocks-1.3.1/style_unstable/scrolling.css" type="text/css">
  <link rel="stylesheet" href="/styles/Building-Blocks-1.3.1/style_unstable/seekbars.css" type="text/css">
  <link rel="stylesheet" href="/styles/Building-Blocks-1.3.1/style_unstable/tabs.css" type="text/css">
  <link rel="stylesheet" href="/styles/Building-Blocks-1.3.1/style_unstable/toolbars.css" type="text/css">

  <!-- Icons -->
  <link rel="stylesheet" href="/styles/Building-Blocks-1.3.1/icons/styles/action_icons.css" type="text/css">
  <link rel="stylesheet" href="/styles/Building-Blocks-1.3.1/icons/styles/media_icons.css" type="text/css">
  <link rel="stylesheet" href="/styles/Building-Blocks-1.3.1/icons/styles/comms_icons.css" type="text/css">
  <link rel="stylesheet" href="/styles/Building-Blocks-1.3.1/icons/styles/settings_icons.css" type="text/css">

  <!-- Transitions -->
  <link rel="stylesheet" href="/styles/Building-Blocks-1.3.1/transitions.css" type="text/css">

  <!-- Util CSS: some extra tricks -->
  <link rel="stylesheet" href="/styles/Building-Blocks-1.3.1/util.css" type="text/css">
  <link rel="stylesheet" href="/styles/Building-Blocks-1.3.1/fonts.css" type="text/css">

  <!-- Additional markup to make Building Blocks kind of cross browser -->
  <link rel="stylesheet" href="/styles/Building-Blocks-1.3.1/cross_browser.css" type="text/css">


  <link href="/styles/main.css" rel="stylesheet" type="text/css">
  <style>
    #index, #index-container {
      height: 100%;
    }
    [data-position="right"] {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      transform: translateX(100%);
      -webkit-transform: translateX(100%);
      z-index: 15;
      z-index: 100; /* -> drawer */
    }
    section[role="region"][data-position="right"] {
      position: absolute;
    }
    [data-position="right"].current {
      animation: rightToCurrent 0.4s forwards;
      -webkit-animation: rightToCurrent 0.4s forwards;
    }
    [data-position="right"].right {
      animation: currentToRight 0.4s forwards;
      -webkit-animation: currentToRight 0.4s forwards;
    }
    [data-position="current"].left {
      animation: currentToLeft 0.4s forwards;
      -webkit-animation: currentToLeft 0.4s forwards;
    }
    [data-position="current"].current {
      animation: leftToCurrent 0.4s forwards;
      -webkit-animation: leftToCurrent 0.4s forwards;
    }
    [data-position="back"] {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: -1;
      opacity: 0;
      /* z-index: 100; -> drawer */
    }
    [data-position="back"].fade-in {
      z-index: 120;
      animation: fadeIn 0.2s forwards;
      -webkit-animation: fadeIn 0.2s forwards;
    }
    [data-position="back"].fade-out {
      animation: fadeOut 0.2s forwards;
      -webkit-animation: fadeOut 0.2s forwards;
    }

    [data-position="edit-mode"] {
      position: absolute;
      top: -5rem;
      left: 0;
      right: 0;
      bottom: -7rem;
      z-index: -1;
      opacity: 0;
      transition: all 0.3s ease;
    }
    [data-position="edit-mode"].edit {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 120;
      opacity: 1;
    }

    /* Headers */
    #headers section[role="region"] {
      margin-bottom: 1.5rem;
    }
    #headers section[role="region"]:not(#drawer) {
      display: inline;
    }
    #headers article header:first-child {
      margin-top: 1.5rem;
    }
    #headers section[role="region"] header h2 {
      margin: 0 0 1.5rem 0;
    }

    /* Lists */
    /* to avoid double background effect on press */
    [data-type=list] li>a:active {
      background-color: transparent;
    }

    /* Drawer */
    section[role="region"].drawer-opened {
      -moz-transform: translateX(80%);
      -webkit-transform: translateX(80%);
    }

    section[data-type="sidebar"] + section[role="region"] > header:first-child > button,
    section[data-type="sidebar"] + section[role="region"] > header:first-child > a {
      background-position: 3.5rem center;
    }

    /* Switches */
    #switches label:last-child {
      margin-left: 2rem;
    }

    /* Scrolling */
    nav[data-type="scrollbar"] {
      padding-top: 1rem;
    }
    nav[data-type="scrollbar"] p {
      opacity: 1;
    }

    /* Seek bars */
    div[role="slider"] > label.icon {
      background: no-repeat right top;
      background-size: 3rem auto;
    }

    /* Tabs */
    #tabs .content {
      padding: 0;
    }
    #tabs .content .content {
      padding: 1.5rem 3rem;
    }

    /* Filters */
    [role="tablist"][data-type="filter"] {
      margin-bottom: 2rem;
    }

    .bottom[role="tablist"][data-type="filter"] {
      bottom: auto;
    }

    /* Device rotation */
    .landscape section[role="region"]#drawer > header:first-child {
      /* Whatever needs to be changed on landscape */
    }

    /* Custom styles */
    span.tag {
      background: #f1e372;
      border-radius: 3px 0 0 3px;
      color: #999;
      display: inline-block;
      height: 26px;
      line-height: 26px;
      padding: 0 20px 0 23px;
      position: relative;
      margin-top: 10px;
    }

    span.tag::before {
      background: #fff;
      border-radius: 10px;
      box-shadow: inset 0 1px rgba(0, 0, 0, 0.25);
      content: '';
      height: 6px;
      left: 10px;
      position: absolute;
      width: 6px;
      top: 10px;
    }

    span.tag::after {
      background: #fff;
      border-bottom: 13px solid transparent;
      border-top: 13px solid transparent;
      border-left: 10px solid #f1e372;
      content: '';
      position: absolute;
      right: 0;
      top: 0;
    }

    form.secret-revealer {
      margin-top: 2em;
    }

    form.secret-revealer svg {
      float: right;
    }

    form.secret-revealer input[type=text] {
      width: 85%;
    }
  </style>

</head>

<body role="application">

  <script type="text/x-handlebars" data-template-name="login">
    <section id="login" role="region">
      <header class="fixed">
        <h1>Yith Library</h1>
      </header>

      <article class="content scrollable header">
        <header>
          {{#if connecting}}
            <h2>Connecting to server</h2>
          {{else}}
            <h2>Connection settings</h2>
          {{/if}}
        </header>
        {{#if connecting}}
          <progress></progress>
        {{else}}
          <form>
            <p>
              <button type="button" class="recommend" {{action 'connect'}}>Connect</button>
            </p>
          </form>
        {{/if}}
      </article>

    </section>

  </script>

  <script type="text/x-handlebars" data-template-name="sync">
    <section id="sync" role="region">
      <header class="fixed">
        <h1>Yith Library</h1>
      </header>

      <article class="content scrollable header">
        <header>
          {{#if syncing}}
            <h2>Synchronizing secrets</h2>
          {{else}}
            <h2>Synchronize from the server</h2>
          {{/if}}
        </header>
        {{#if syncing}}
          <progress></progress>
        {{else}}
          <form>
            <p>
              <button type="button" class="recommend" {{action 'sync'}}>Sync</button>
            </p>
          </form>
        {{/if}}
      </article>

    </section>

  </script>

  <script type="text/x-handlebars" data-template-name="secrets">
    <section id="index" data-position="current" {{bind-attr class="position"}}>

      <section data-type="sidebar">
        <header>
          <menu type="toolbar">
            <a href="#" {{action 'closeDrawer'}}>Done</a>
          </menu>
          <h1>Tags</h1>
        </header>
        <nav>
          <ul>
            {{#each tag in tags}}
              <li>
                <a href="#" {{action 'selectTag' tag.name }}>
                  {{currentTag tag.name selectedTag}}
                  {{tag.name}} ({{tag.count}})
                </a>
              </li>
            {{/each}}
          </ul>
        </nav>
      </section>

      <section id="secrets" role="region" {{bind-attr class="state"}}>
        <header class="fixed">
          <a href="#" {{action 'openDrawer'}}><span class="icon icon-menu">menu</span></a>
          <form action="#">
            {{input placeholder="search" value=query}}
            <button type="reset">Remove text</button>
          </form>
        </header>
        <article class="content scrollable header">
          <header>
            <h2>
              {{secretsCount}} {{secretsNoun}}
              {{#if selectedTag}}
              <span class="tag">{{selectedTag}}</span>
              {{/if}}
            </h2>
          </header>
          <div data-type="list">
            <ul>
              {{#each secrets}}
                <li>
                  {{#link-to 'secret' id }}
                    <p>{{service}}</p>
                    <p>{{account}}</p>
                  {{/link-to}}
                </li>
              {{/each}}
            </ul>
          </div>
        </article>
      </section>
    </section>

    {{outlet secret}}
  </script>

  <script type="text/x-handlebars" data-template-name="secret">
    <header class="fixed">
      <button {{action secrets target="view" }}><span class="icon icon-back">back</span></button>
      <h1>{{service}}</h1>
    </header>

    <article class="content scrollable header">
      {{view App.SecretRevealerView encryptedSecret=secret}}
      <header>
        <h2>Account</h2>
      </header>
      <p>{{account}}</p>

      {{#if notes}}
        <header>
          <h2>Notes</h2>
        </header>
        <p>{{notes}}</p>
      {{/if}}

      {{#if tags}}
        <header>
          <h2>Tags</h2>
        </header>
        <p>{{ tags }}</p>
      {{/if}}
    </article>
  </script>

  <script type="text/x-handlebars" data-template-name="secret-revealer">
    <p>
      {{#if view.decryptedSecret}}
        <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40">
          <circle cx="50%" cy="50%" r="50%" fill="buttonface" />
          <path fill="white" />
        </svg>
        <input type="text" readonly {{bind-attr value=view.decryptedSecret}} />
      {{else}}
        <input type="password" placeholder="Enter your master password here" autofocus autocomplete="off" />
        <button type="reset">Clear</button>
      {{/if}}
    </p>
    <p>
      <button {{bind-attr class=view.buttonClass}}>{{view.buttonText}}</button>
    </p>
  </script>

  <!-- Dependencies -->
  <script src="scripts/vendor/jquery-2.0.3.js"></script>
  <script src="scripts/vendor/handlebars-v1.2.1.js"></script>
  <script src="scripts/vendor/ember-1.3.1.js"></script>
  <script src="scripts/vendor/ember-data-1.0.0.beta5.js"></script>
  <script src="scripts/vendor/ember.oauth2.0.2.3.js"></script>
  <script src="scripts/vendor/sjcl-1.0.0.min.js"></script>

  <script src="scripts/adapters.js"></script>

  <!-- Application -->
  <script src="scripts/application.js"></script>
  <script src="scripts/settings.js"></script>
  <script src="scripts/router.js"></script>
  <script src="scripts/controllers.js"></script>
  <script src="scripts/views.js"></script>
  <script src="scripts/models.js"></script>

</body>
</html>

